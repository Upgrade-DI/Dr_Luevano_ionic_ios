(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();var w="https://armoniaestetica.com/",d=w+"_sudiv3/ar_engine/login_validate_new_ios.php",m="ontouchstart"in document.documentElement?"touchend":"click",f;"ontouchstart"in document.documentElement&&document.addEventListener("touchstart",function(){},!1);function y(t){console.log(t);var i=t[0],e=t[1],s=t[2];e==""||e==null||e=="null"||e==null||e=="undefined"||e=="u"?(modal.hide(),ons.notification.toast({message:"Not user validate",timeout:1e3}),$inputs.prop("disabled",!1),$("#submit_login").html(login_btn_text)):(localStorage.setItem("id_pat",i),localStorage.getItem("id_pat"),localStorage.setItem("mail_pat",e),localStorage.getItem("mail_pat"),localStorage.setItem("pass_pat",s),localStorage.getItem("pass_pat"),setTimeout(function(){modal.hide()},2e3),setTimeout(function(){var o="home.html";window.location.replace(o)},500))}function S(){var t=document.querySelector("ons-modal");t.show(),setTimeout(function(){t.hide()},2e3),setTimeout(function(){var i="index.html";window.location.replace(i)},2e3)}var m="ontouchstart"in document.documentElement?"touchend":"click",v;$(document).on(m,"#submit_login",function(){$("#login_form").submit()});$("#forget_pass").bind(m,function(t){$(this).data("request")=="0"?($(this).data("request","1"),$(this).html("Cancelar"),$("#submit_login").html("Enviar"),$("#login_user").attr("placeholder","Capture su correo para recuperar password"),$("#login_user").val(""),H($(".error_login"),"Capture su correo electrÃ³nico:","#FFF")):($(this).data("request","0"),$(this).html("Recuperar acceso"),$("#submit_login").html("Ingresar"),$("#login_user").attr("placeholder","Correo")),$(this).toggleClass("cancel"),$("#login_password_box").toggleClass("closed")});$(document).on("submit","#login_form",function(){var t=document.querySelector("ons-modal"),i=0,e,e=$("#login_user").val().length>=4?1:0,s=$("#login_password").val().length>=4?1:0;if(e+s==2||i==1){var o=d+"?method=validate_login",a;a&&a.abort();var r=$(this),n=r.find("input, select, button, textarea, checkbox"),c=r.serialize();n.prop("disabled",!0);var u=$("#submit_login").html();t.show(),a=$.ajax({url:o,type:"post",data:c}),a.done(function(l,g,p){switch(i){case 1:if(l!=="unsuccessful"){var h=$.parseJSON(l),_='<i class="fa fa-envelope" style="color:#83DF83;"></i> '+h[0]+', hemos enviado un correo a "'+h[1]+'"';ons.notification.toast({message:_,timeout:1e3}),$("#forget_pass").trigger("click"),$("#submit_login").html("Enviar"),n.prop("disabled",!1)}else ons.notification.toast({message:"No hemos encontrado el usuario",timeout:1e3}),n.prop("disabled",!1),$("#submit_login").html(u);break;case 2:l!="unsuccessful"?(ons.notification.toast({message:"Password cambiado correctamente.",timeout:1e3}),$("#login_password_box").remove(),$(".login_buttons").remove()):(ons.notification.toast({message:"El código de solicitud ya ha sido usado o ha caducado",timeout:1e3}),n.prop("disabled",!1),$("#submit_login").html(u));break;default:if(l!=="unsuccessful"){var b=$.parseJSON(l);ons.notification.toast({message:"Datos correctos",timeout:1e3}),y(b)}else t.hide(),ons.notification.toast({message:"Datos incorrectos",timeout:1e3}),n.prop("disabled",!1),$("#submit_login").html(u);break}}),a.fail(function(l,g,p){console.error("Han ocurrido los siguientes errores: "+g,p)}),a.always(function(){})}else e||$("#login_user").addClass("input_required"),s||$("#login_password").addClass("input_required"),ons.notification.toast({message:"Faltan datos para ingresar",timeout:1e3});return!1});$(document).on("submit","#register_form",function(){var t=$("#login_register_user").val().length>=4?1:0,i=$("#login_register_password").val().length>=4?1:0;if($("#login_register_password").val()==$("#login_register_password_confirm").val())if(t+i===2){var e=d+"?method=register_user",s;s&&s.abort();var o=$(this),a=o.find("input, select, button, textarea, checkbox"),r=o.serialize();a.prop("disabled",!0);var n=$("#get_register").html();s=$.ajax({url:e,type:"post",data:r}),s.done(function(c,u,l){c!=="unsuccessful"?(ons.notification.toast({message:"Registro exitoso",timeout:2e3}),$("#push-return").trigger("click")):(ons.notification.toast({message:c,timeout:2e3}),a.prop("disabled",!1),$("#get_register").html(n))}),s.fail(function(c,u,l){console.error("Han ocurrido los siguientes errores: "+u,l)}),s.always(function(){})}else ons.notification.toast({message:"Password o usuario incompleto",timeout:2e3});else ons.notification.toast({message:"Las contraseñas no coinciden",timeout:2e3});return!1});$(document).on("submit","#recover_form",function(){var t=$("#login_recover_pass").val().length>=4?1:0;if($("#login_register_password").val()===$("#login_register_password_confirm").val())if(t===1){var i=d+"?method=request_pass",e;e&&e.abort();var s=$(this),o=s.find("input, select, button, textarea, checkbox"),a=s.serialize();o.prop("disabled",!0),$("#get_register").html(),e=$.ajax({url:i,type:"post",data:a}),e.done(function(r,n,c){r!=="unsuccessful"?(ons.notification.toast({message:"Revise su correo electrónico.",timeout:2e3}),myNavigator.popPage()):(ons.notification.toast({message:"No se localiza el usuario",timeout:2e3}),o.prop("disabled",!1))}),e.fail(function(r,n,c){console.error("Han ocurrido los siguientes errores: "+n,c)}),e.always(function(){})}else ons.notification.toast({message:"Faltan datos por ingresar",timeout:2e3});else ons.notification.toast({message:"Las contraseñas no coiciden",timeout:2e3});return!1});$(document).on(m,"#do_logout",function(){return f||x(),!1}).on("touchmove",function(t){f=!0}).on("touchstart",function(){f=!1});function x(){localStorage.removeItem("id_pat"),localStorage.removeItem("mail_pat"),localStorage.removeItem("pass_pat");var t=$.ajax({url:d,type:"post",data:{method:"do_logout"}});t.done(function(i,e,s){i=="successful"&&S()}),t.fail(function(i,e,s){})}function H(t,i,e,s){t.html(i),t.css("color",e),t.addClass("show"),clearTimeout(v),v=setTimeout(function(){t.removeClass("show")},3500)}
